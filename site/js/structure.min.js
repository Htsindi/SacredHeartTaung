$(document).ready(function(){Player=function(vid){jwplayer("cboxLoadedContent").setup({flashplayer:"site/js/player.swf",file:vid,height:370,width:580,autostart:true});};$('.nav li a').live('click',function(){$('div#search-results').hide();$('.search').val('Search for a video');$('#about').hide();$('#content').show();$('.nav li a').removeClass('on');$(this).addClass('on');$('#grade1, #grade2, #grade3, #grade4, #grade5').removeClass('filter').hide();if($(this).parent().is('.nav_basics'))$('#grade1').addClass('filter').show();else if($(this).parent().is('.nav_grade10'))$('#grade2').addClass('filter').show();else if($(this).parent().is('.nav_grade11'))$('#grade3').addClass('filter').show();else if($(this).parent().is('.nav_grade12'))$('#grade4').addClass('filter').show();else if($(this).parent().is('.nav_all'))$('#grade5').addClass('filter').show();$('.content h1:first').css({"border-top":"0"});$('.topic:last, .topic:last ul').css({"-webkit-border-radius":"0 0 10px 10px","border-radius":"0 0 10px 10px"});$('.filter h1:first').css({"border-top":"0"});$('.filter .topics:last, .filter .topic:last, .filter .topic:last ul').css({"-webkit-border-radius":"0 0 10px 10px","border-radius":"0 0 10px 10px"});});$('.topic h3 a').live('click',function(){$(this).toggleClass('open');$(this).parent().parent().find('.vids').toggle();});$('.about').live('click',function(){$('div#search-results').hide();$('.search').val('Search for a video');$('.nav li a').removeClass('on');$('#content').hide();$('#about').show();});$("a.video").colorbox({width:620,height:410,onClosed:function(){jwplayer().setup();}});$.getJSON("http://smart-ip.net/geoip-json?callback=?",'',function(jsondata,textStatus,jqXHR){jsondata.version='0101053'; $.post('http://www.numeric.org/api/v1/ovb/stats',jsondata);});var input=$('input.search');input.focus(function(){if('Search for a video'==$(this).val())$(this).val('');else this.select();$(this).css('color','#000');}).blur(function(){var el=$(this);if(el.val()=='')el.val('Search for a video');el.css('color','#AAA');});var get_hits=function(query){var hits=[];for(var i=0;i<query_set.length;i+=1){video=query_set[i];var intersection_index=video.title.toLowerCase().indexOf(query.toLowerCase());if(intersection_index!=-1){start=intersection_index;end=intersection_index+query.length;left=video.title.substr(0,start);mid=video.title.substr(start,query.length);right=video.title.substr(end,video.title.length-end);vid_html='<li><a href="javascript: void(0);" onclick="javascript: new Player(\''+video.file+'\')">'+left+'<span class="bold">'+mid+'</span>'+right+'</a></li>';hits.push(vid_html.toString());if(hits.length>=20){hits.push('<li style="font-style: italic; font-size: 14px; margin-top:1em; text-align: center;">There are more videos matching "'+query+'" - search for something more specific to narrow the results.</li>');return hits;}}}if(hits.length<=0)return ['<li>No videos matched your query, "'+query+'"</li>'];else return hits;};var do_search=function(e){$('.nav li a').removeClass('on');$('#content').hide();$('#about').hide();$('#search-results').show();search_page_html=''+'<h1 class="no_bord_top">Search results:</h1>'+'<div class="topic block">'+'<ul class="col1">';if(input.val().length===0)var hits=['<li>Type in the search box to search, or click on a topic.</li>'];else var hits=get_hits(input.val());$(hits).each(function(i,html){search_page_html+=html;});search_page_html+='</ul></div>';$('div#search-results').html(search_page_html);$('div#search-results a').colorbox({width:620,height:410,onClosed:function(){jwplayer().setup();}});};input.keyup(do_search);input.keydown(function(e){if(e.keyCode===8)do_search(e);});});
